!function(c){var i="unobtrusiveAjaxClick",n="unobtrusiveAjaxClickTarget";function d(t,a){for(var e=window,r=(t||"").split(".");e&&r.length;)e=e[r.shift()];return"function"==typeof e?e:(a.push(t),Function.constructor.apply(null,a))}function s(t){return"GET"===t||"POST"===t}function u(r,t){var a,e,n,i;if(!(a=r.getAttribute("data-ajax-confirm"))||window.confirm(a)){e=c(r.getAttribute("data-ajax-loading")),i=parseInt(r.getAttribute("data-ajax-loading-duration"),10)||0,c.extend(t,{type:r.getAttribute("data-ajax-method")||void 0,url:r.getAttribute("data-ajax-url")||void 0,cache:"true"===(r.getAttribute("data-ajax-cache")||"").toLowerCase(),beforeSend:function(t){var a;return function(t,a){s(a)||t.setRequestHeader("X-HTTP-Method-Override",a)}(t,n),!1!==(a=d(r.getAttribute("data-ajax-begin"),["xhr"]).apply(r,arguments))&&e.show(i),a},complete:function(){e.hide(i),d(r.getAttribute("data-ajax-complete"),["xhr","status"]).apply(r,arguments)},success:function(t,a,e){!function(t,e,a){var r;-1===a.indexOf("application/x-javascript")&&(r=(t.getAttribute("data-ajax-mode")||"").toUpperCase(),c(t.getAttribute("data-ajax-update")).each(function(t,a){switch(r){case"BEFORE":c(a).prepend(e);break;case"AFTER":c(a).append(e);break;case"REPLACE-WITH":c(a).replaceWith(e);break;default:c(a).html(e)}}))}(r,t,e.getResponseHeader("Content-Type")||"text/html"),d(r.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(r,arguments)},error:function(){d(r.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(r,arguments)}}),t.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),s(n=t.type.toUpperCase())||(t.type="POST",t.data.push({name:"X-HTTP-Method-Override",value:n}));var u=c(r);if(u.is("form")&&"multipart/form-data"==u.attr("enctype")){var o=new FormData;c.each(t.data,function(t,a){o.append(a.name,a.value)}),c("input[type=file]",u).each(function(){var e=this;c.each(e.files,function(t,a){o.append(e.name,a)})}),c.extend(t,{processData:!1,contentType:!1,data:o})}c.ajax(t)}}c(document).on("click","a[data-ajax=true]",function(t){t.preventDefault(),u(this,{url:this.href,type:"GET",data:[]})}),c(document).on("click","form[data-ajax=true] input[type=image]",function(t){var a=t.target.name,e=c(t.target),r=c(e.parents("form")[0]),n=e.offset();r.data(i,[{name:a+".x",value:Math.round(t.pageX-n.left)},{name:a+".y",value:Math.round(t.pageY-n.top)}]),setTimeout(function(){r.removeData(i)},0)}),c(document).on("click","form[data-ajax=true] :submit",function(t){var a=t.currentTarget.name,e=c(t.target),r=c(e.parents("form")[0]);r.data(i,a?[{name:a,value:t.currentTarget.value}]:[]),r.data(n,e),setTimeout(function(){r.removeData(i),r.removeData(n)},0)}),c(document).on("submit","form[data-ajax=true]",function(t){var a=c(this).data(i)||[],e=c(this).data(n),r=e&&(e.hasClass("cancel")||void 0!==e.attr("formnovalidate"));t.preventDefault(),(r||function(t){var a=c(t).data("unobtrusiveValidation");return!a||!a.validate||a.validate()}(this))&&u(this,{url:this.action,type:this.method||"GET",data:a.concat(c(this).serializeArray())})})}(jQuery);